@model IEnumerable<core2Bowling.ViewComponents.MainMenu>

@{
    //string select = "";

    string currentControllerName = (string)ViewContext.RouteData.Values["controller"];
    string currentActionName = (string)ViewContext.RouteData.Values["action"];

    string controllerName = string.Empty;
    string actionName = string.Empty;
    
    

    //if (currentActionName.ToUpper() == "CREATE" || currentActionName.ToUpper() == "EDIT"
    //    || currentActionName.ToUpper() == "DETAILS" || currentActionName.ToUpper() == "DELETE")
    //{
    //    currentActionName = "Index";
    //}

}


@foreach (var item in Model)
{

    var sb = new System.Text.StringBuilder();

    controllerName = item.controllerName;
    actionName = item.actionName;

    switch (item.level)
    {
        case 0:

            //if (currentControllerName.Equals(controllerName, StringComparison.CurrentCultureIgnoreCase))
            if (currentControllerName.Equals(controllerName, StringComparison.CurrentCultureIgnoreCase) && currentActionName.Equals(actionName, StringComparison.CurrentCultureIgnoreCase))
            {

                sb.Append("<li class='active'><a href='/" + controllerName + "/" + actionName + "/'><i class='" + item.icon + "'></i> " + item.linkText + "</a>");
            }
            else
            {
                sb.Append("<li><a href='/" + controllerName + "/" + actionName + "/'>" + item.linkText + "</a>");
            }

            sb.Append("</li>");
            break;

        case 1:

            if (currentControllerName.Equals(controllerName, StringComparison.CurrentCultureIgnoreCase))
            //if (currentControllerName.Equals(controllerName, StringComparison.CurrentCultureIgnoreCase) && currentActionName.Equals(actionName, StringComparison.CurrentCultureIgnoreCase))
            {

                sb.Append("<li class='active'><a><i class='" + item.icon + "'></i> " + item.linkText + "</a>");
            }
            else
            {
                sb.Append("<li><a href='/" + controllerName + "/" + actionName + "/'>" + item.linkText + "</a>");
            }

            sb.Append("</li>");
            break;

        //아래는 계층형으로 사용하지 않음

        case 2:

            if (actionName == "start")
            {
                if (currentControllerName.Equals(controllerName, StringComparison.CurrentCultureIgnoreCase))
                {
                    sb.Append("<li class='active'><a href='#' class='dropdown-collapse'><i class='" +item.icon+ "'></i><span class='side-menu-title'>" + item.linkText + "</span><span class='fa arrow'></span></a>"
                       + "<ul class='nav nav-second-level in'>");

                }
                else
                {
                    sb.Append("<li><a href='#' class='dropdown-collapse'><i class='" + item.icon + "'></i><span class='side-menu-title'>" + item.linkText + "</span><span class='fa arrow'></span></a>"
                        + "<ul class='nav nav-second-level'>");
                }


            }
            else
            {
                sb.Append("</ul></li>");
            }

            break;


        case 3:

            //if (currentControllerName.Equals(controllerName, StringComparison.CurrentCultureIgnoreCase))
            if (currentControllerName.Equals(controllerName, StringComparison.CurrentCultureIgnoreCase) && currentActionName.Equals(actionName, StringComparison.CurrentCultureIgnoreCase))
            {

                sb.Append("<li><a href='/" + controllerName + "/" + actionName + "/' class='active'>" + item.linkText + "<span class='badge pull-right'>▶</span></a>");
            }
            else
            {
                sb.Append("<li><a href='/" + controllerName + "/" + actionName + "/'>" + item.linkText + "</a>");
            }

            sb.Append("</li>");
            break;

        default:
            break;
    }

    @Html.Raw(sb.ToString());

}


@*<li>
    <a href="tables.html"><i class="fa fa-table fa-fw"></i> <span class="side-menu-title">Tables</span></a>
</li>

<li>
    <a href="#" class="dropdown-collapse"><i class="fa fa-wrench fa-fw"></i> <span class="side-menu-title">UI Elements</span><span class="fa arrow"></span></a>
    <ul class="nav nav-second-level">
        <li>
            <a href="panels-wells.html">Panels and Wells</a>
        </li>
        <li>
            <a href="buttons.html">Buttons</a>
        </li>
        <li>
            <a href="notifications.html">Notifications</a>
        </li>
        <li>
            <a href="typography.html">Typography</a>
        </li>
        <li>
            <a href="icons.html"> Icons</a>
        </li>
        <li>
            <a href="grid.html">Grid</a>
        </li>
    </ul>
    
</li>*@